function buildChartAndLegend(n){chart&&chart.destroy();Chart.defaults.font.family=$("body").css("font-family");var t=getColors(SharedChartData.datasets[0].data.length);SharedChartData.datasets[0].backgroundColor||(SharedChartData.datasets[0].backgroundColor=[]);SharedChartData.datasets[0].backgroundColor=t;chart=new Chart(n.getContext("2d"),{plugins:[ChartDataLabels],type:"pie",data:SharedChartData,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1,animation:{duration:2e3},plugins:{legend:{display:!1},datalabels:{color:"black",anchor:"end",align:"end",offset:0,font:{weight:"bold",size:14}}},layout:{padding:{top:17,bottom:17}},onClick:function(n){var t=chart.getElementsAtEventForMode(n,"index",{intersect:!0},!1),i;t&&t.length&&(i=getLinkByIndex(t[0].index),isWhitespace(i)||jqNavigate(i))}}});buildLegendFromChartDataset()}function buildLegendFromChartDataset(){for(var t=chart.data.datasets[0],i="_LegendColorsPlh_",f='<i class="'+SharedConstStatisticsPage.get("IconClasses")+' legend-sample" style = "color:'+i+'" >'+SharedConstStatisticsPage.get("LegendBoxIcon")+"<\/i >",r="",u="",n=0;n<t.data.length;n++)r=t.labels[n],u=f.replace(i,t.backgroundColor[n]),$("#chart-legend").append('<li class="collection-item legend-item">'+u+r+"<\/li>")}function getLinkByIndex(n){var t,i;if(!isNull(n)&&n>=0&&SharedSliceLabelsToStepSearchLinks&&(t=SharedSliceLabelsToStepSearchLinks.get("items"),t&&t.length>0))for(i=0;i<t.length;i++)if(i===n)return t[i].linkToStepItemsSearch}$(function(){});var chart;$(window).on("load",function(){if(SharedConstStatisticsPage.get("ShowGraphic")){var n=document.getElementById("chart-area");n!=null&&buildChartAndLegend(n)}});